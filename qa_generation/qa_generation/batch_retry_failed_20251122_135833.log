2025-11-22 13:58:34,167 - INFO - Updating QA pairs with comprehensive_text answers (BATCH MODE)...
2025-11-22 13:58:34,167 - INFO - QA Directory: /home/himanshu/dev/test/data/processed/qa_pairs_individual_components_comprehensive
2025-11-22 13:58:34,167 - INFO - Compounds Directory: /home/himanshu/dev/test/data/processed/individual_compounds
2025-11-22 13:58:34,167 - INFO - OPTIMIZATION: Sending comprehensive_text once and asking all 3 questions together
2025-11-22 13:58:34,167 - INFO - Processing 17 failed files only
2025-11-22 13:58:34,168 - INFO - Processing 17 specific files: ['113_Petroleum.json', '140_Riboflavin.json', '151_Sodium_Cyclamate.json', '154_Sodium_Hypochlorite.json', '156_Sodium_Phosphate.json', '172_Toluene.json', '22_Benzene.json', '32_Calcium_Oxide.json', '40_Cellulose.json', '44_Chlorophyll.json', '5_Acetic_acid.json', '60_Ethyl_Alcohol.json', '68_Gamma-123456-Hexachlorocyclohexane.json', '7_Acetylsalicylic_Acid.json', '73_Hydrogen_Chloride.json', '84_Luminol.json', '86_Magnesium_Hydroxide.json']
2025-11-22 13:58:34,168 - INFO - Processing 1/17: 113_Petroleum.json
2025-11-22 13:58:34,168 - INFO - Processing 113_Petroleum.json - Petroleum
2025-11-22 13:58:34,169 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:58:47,168 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:58:47,177 - INFO -   Successfully updated 3 answers for Petroleum
2025-11-22 13:58:48,178 - INFO - Processing 2/17: 140_Riboflavin.json
2025-11-22 13:58:48,178 - INFO - Processing 140_Riboflavin.json - Riboflavin
2025-11-22 13:58:48,179 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:58:52,559 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:58:52,565 - INFO -   Successfully updated 3 answers for Riboflavin
2025-11-22 13:58:53,565 - INFO - Processing 3/17: 151_Sodium_Cyclamate.json
2025-11-22 13:58:53,566 - INFO - Processing 151_Sodium_Cyclamate.json - Sodium Cyclamate
2025-11-22 13:58:53,566 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:58:56,166 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:58:56,167 - INFO -   Successfully updated 3 answers for Sodium Cyclamate
2025-11-22 13:58:57,168 - INFO - Processing 4/17: 154_Sodium_Hypochlorite.json
2025-11-22 13:58:57,168 - INFO - Processing 154_Sodium_Hypochlorite.json - Sodium Hypochlorite
2025-11-22 13:58:57,169 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:02,970 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:02,971 - INFO -   Successfully updated 3 answers for Sodium Hypochlorite
2025-11-22 13:59:03,972 - INFO - Processing 5/17: 156_Sodium_Phosphate.json
2025-11-22 13:59:03,972 - INFO - Processing 156_Sodium_Phosphate.json - Sodium Phosphate
2025-11-22 13:59:03,973 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:07,609 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:07,615 - INFO -   Successfully updated 3 answers for Sodium Phosphate
2025-11-22 13:59:08,616 - INFO - Processing 6/17: 172_Toluene.json
2025-11-22 13:59:08,616 - INFO - Processing 172_Toluene.json - Toluene
2025-11-22 13:59:08,617 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:11,825 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:11,826 - INFO -   Successfully updated 3 answers for Toluene
2025-11-22 13:59:12,826 - INFO - Processing 7/17: 22_Benzene.json
2025-11-22 13:59:12,827 - INFO - Processing 22_Benzene.json - Benzene
2025-11-22 13:59:12,828 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:15,192 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:15,198 - INFO -   Successfully updated 3 answers for Benzene
2025-11-22 13:59:16,199 - INFO - Processing 8/17: 32_Calcium_Oxide.json
2025-11-22 13:59:16,199 - INFO - Processing 32_Calcium_Oxide.json - Calcium Oxide
2025-11-22 13:59:16,200 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:18,087 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:18,090 - INFO -   Successfully updated 3 answers for Calcium Oxide
2025-11-22 13:59:19,090 - INFO - Processing 9/17: 40_Cellulose.json
2025-11-22 13:59:19,091 - INFO - Processing 40_Cellulose.json - Cellulose
2025-11-22 13:59:19,092 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:22,087 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:22,091 - INFO -   Successfully updated 3 answers for Cellulose
2025-11-22 13:59:23,092 - INFO - Processing 10/17: 44_Chlorophyll.json
2025-11-22 13:59:23,092 - INFO - Processing 44_Chlorophyll.json - Chlorophyll
2025-11-22 13:59:23,093 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:24,249 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:24,255 - INFO -   Successfully updated 3 answers for Chlorophyll
2025-11-22 13:59:25,256 - INFO - Processing 11/17: 5_Acetic_acid.json
2025-11-22 13:59:25,256 - INFO - Processing 5_Acetic_acid.json - Acetic acid
2025-11-22 13:59:25,257 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:28,310 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:28,312 - INFO -   Successfully updated 3 answers for Acetic acid
2025-11-22 13:59:29,313 - INFO - Processing 12/17: 60_Ethyl_Alcohol.json
2025-11-22 13:59:29,313 - INFO - Processing 60_Ethyl_Alcohol.json - Ethyl Alcohol
2025-11-22 13:59:29,314 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:33,987 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:33,988 - INFO -   Successfully updated 3 answers for Ethyl Alcohol
2025-11-22 13:59:34,989 - INFO - Processing 13/17: 68_Gamma-123456-Hexachlorocyclohexane.json
2025-11-22 13:59:34,989 - INFO - Processing 68_Gamma-123456-Hexachlorocyclohexane.json - Gamma-1,2,3,4,5,6-Hexachlorocyclohexane
2025-11-22 13:59:34,990 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:38,302 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:38,307 - INFO -   Successfully updated 3 answers for Gamma-1,2,3,4,5,6-Hexachlorocyclohexane
2025-11-22 13:59:39,308 - INFO - Processing 14/17: 73_Hydrogen_Chloride.json
2025-11-22 13:59:39,308 - INFO - Processing 73_Hydrogen_Chloride.json - Hydrogen Chloride
2025-11-22 13:59:39,309 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:42,247 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:42,250 - INFO -   Successfully updated 3 answers for Hydrogen Chloride
2025-11-22 13:59:43,251 - INFO - Processing 15/17: 7_Acetylsalicylic_Acid.json
2025-11-22 13:59:43,251 - INFO - Processing 7_Acetylsalicylic_Acid.json - Acetylsalicylic Acid
2025-11-22 13:59:43,256 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:43,795 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-22 13:59:43,795 - INFO - Retrying request to /chat/completions in 0.470015 seconds
2025-11-22 13:59:44,787 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-22 13:59:44,788 - INFO - Retrying request to /chat/completions in 0.814596 seconds
2025-11-22 13:59:46,160 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 429 Too Many Requests"
2025-11-22 13:59:46,161 - ERROR - Error regenerating answers: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-v2azWyowjxBzM4GMyOFwwNov on tokens per min (TPM): Limit 30000, Requested 31788. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
2025-11-22 13:59:46,161 - ERROR - Error in batch regeneration: Error code: 429 - {'error': {'message': 'Request too large for gpt-4o in organization org-v2azWyowjxBzM4GMyOFwwNov on tokens per min (TPM): Limit 30000, Requested 31788. The input or output tokens must be reduced in order to run successfully. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
2025-11-22 13:59:47,161 - INFO - Processing 16/17: 84_Luminol.json
2025-11-22 13:59:47,162 - INFO - Processing 84_Luminol.json - Luminol
2025-11-22 13:59:47,163 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:49,872 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:49,874 - INFO -   Successfully updated 3 answers for Luminol
2025-11-22 13:59:50,875 - INFO - Processing 17/17: 86_Magnesium_Hydroxide.json
2025-11-22 13:59:50,875 - INFO - Processing 86_Magnesium_Hydroxide.json - Magnesium Hydroxide
2025-11-22 13:59:50,876 - INFO -   Regenerating answers for Q2, Q3, Q4 in batch...
2025-11-22 13:59:53,541 - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-11-22 13:59:53,542 - INFO -   Successfully updated 3 answers for Magnesium Hydroxide

============================================================
COMPREHENSIVE QA UPDATE RESULTS (BATCH MODE)
============================================================
Total files processed: 17
Successful: 16
Failed: 1
Duration: 79.37 seconds (1.32 minutes)

Failed files (1):
  - 7_Acetylsalicylic_Acid.json

Output directory: /home/himanshu/dev/test/data/processed/qa_pairs_individual_components_comprehensive

Token Savings: ~65% reduction (comprehensive_text sent once instead of 3 times)
